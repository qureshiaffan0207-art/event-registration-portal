<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Registration Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
            color: white;
            padding: 35px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            opacity: 0.95;
            font-size: 15px;
            position: relative;
            z-index: 1;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            padding: 30px 50px;
            background: #f8f9fa;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50px;
            right: 50px;
            height: 3px;
            background: #e0e0e0;
            z-index: 0;
        }

        .progress-fill {
            position: absolute;
            top: 50%;
            left: 50px;
            height: 3px;
            background: linear-gradient(90deg, #1e3c72, #7e22ce);
            transition: width 0.3s ease;
            z-index: 1;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-circle {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: white;
            border: 3px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #999;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-circle {
            border-color: #1e3c72;
            background: linear-gradient(135deg, #1e3c72, #7e22ce);
            color: white;
            transform: scale(1.15);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.4);
        }

        .progress-step.completed .step-circle {
            border-color: #4caf50;
            background: #4caf50;
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }

        .form-content {
            padding: 40px;
        }

        .page {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .form-card {
            background: linear-gradient(145deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .form-card h3 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-card h3::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #1e3c72, #7e22ce);
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .form-group label .required {
            color: #e74c3c;
            margin-left: 3px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }

        .form-group input.error,
        .form-group select.error {
            border-color: #e74c3c;
            animation: shake 0.3s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .form-group .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .form-group .error-message.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .file-upload {
            position: relative;
            border: 2px dashed #e9ecef;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: white;
        }

        .file-upload:hover {
            border-color: #1e3c72;
            background: #f8f9ff;
            transform: translateY(-2px);
        }

        .file-upload input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
            top: 0;
            left: 0;
        }

        .file-upload-icon {
            font-size: 40px;
            color: #1e3c72;
            margin-bottom: 10px;
        }

        .file-upload-text {
            color: #666;
            font-size: 14px;
        }

        .file-name {
            margin-top: 10px;
            color: #4caf50;
            font-weight: 500;
            font-size: 13px;
        }

        .review-section {
            background: linear-gradient(145deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .review-section h4 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .review-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .review-item:last-child {
            border-bottom: none;
        }

        .review-label {
            color: #666;
            font-size: 14px;
        }

        .review-value {
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .payment-method {
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .payment-method::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(30, 60, 114, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .payment-method:hover::before {
            left: 100%;
        }

        .payment-method:hover {
            border-color: #1e3c72;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(30, 60, 114, 0.2);
        }

        .payment-method.selected {
            border-color: #1e3c72;
            background: linear-gradient(145deg, #f8f9ff 0%, #ffffff 100%);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.2);
        }

        .payment-method input[type="radio"] {
            display: none;
        }

        .payment-icon {
            font-size: 35px;
            margin-bottom: 10px;
        }

        .payment-label {
            font-size: 14px;
            color: #333;
            font-weight: 600;
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        button {
            padding: 14px 30px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1e3c72 0%, #7e22ce 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(30, 60, 114, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #e9ecef;
            color: #333;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .success-message {
            text-align: center;
            padding: 40px;
        }

        .success-icon {
            font-size: 80px;
            color: #4caf50;
            margin-bottom: 20px;
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0) rotate(0deg);
            }
            to {
                transform: scale(1) rotate(360deg);
            }
        }

        .success-message h2 {
            color: #333;
            margin-bottom: 10px;
        }

        .success-message p {
            color: #666;
            margin-bottom: 20px;
        }

        .dynamic-field {
            display: none;
            animation: slideDown 0.3s ease;
        }

        .dynamic-field.show {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 500px;
            }
        }

        /* Payment Form Styles */
        .payment-form {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-top: 20px;
        }

        .payment-form h3 {
            color: #1e3c72;
            margin-bottom: 25px;
            font-size: 20px;
            text-align: center;
        }

        .card-display {
            background: linear-gradient(135deg, #1e3c72 0%, #7e22ce 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            min-height: 180px;
            position: relative;
            box-shadow: 0 10px 30px rgba(30, 60, 114, 0.3);
        }

        .card-chip {
            width: 45px;
            height: 35px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .card-number {
            font-size: 22px;
            letter-spacing: 3px;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
        }

        .card-details {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
        }

        .upi-id {
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            color: #1e3c72;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-size: 14px;
            color: #1976d2;
        }

        .timer {
            text-align: center;
            font-size: 16px;
            color: #e74c3c;
            font-weight: 600;
            margin: 15px 0;
        }

        /* Feature boxes */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-box {
            background: linear-gradient(145deg, #f8f9fa, #ffffff);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .feature-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .feature-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .feature-title {
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 5px;
        }

        .feature-text {
            font-size: 13px;
            color: #666;
        }

        /* Referral code */
        .referral-section {
            background: linear-gradient(145deg, #fff8e1, #ffffff);
            border: 2px dashed #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .referral-input {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .discount-badge {
            background: #4caf50;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            display: inline-block;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .form-content {
                padding: 20px;
            }

            .progress-bar {
                padding: 20px;
            }

            .progress-bar::before {
                left: 20px;
                right: 20px;
            }

            .progress-fill {
                left: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .payment-methods {
                grid-template-columns: 1fr;
            }

            .step-label {
                font-size: 10px;
            }

            .step-circle {
                width: 35px;
                height: 35px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Event Registration Portal</h1>
            <p>Join us for an unforgettable experience ‚Ä¢ Secure ‚Ä¢ Fast ‚Ä¢ Easy</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
            <div class="progress-step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Personal Info</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Event Details</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-circle">3</div>
                <div class="step-label">Review & Pay</div>
            </div>
        </div>

        <div class="form-content">
            <!-- Page 1: Personal Information -->
            <div class="page active" id="page1">
                <div class="feature-grid">
                    <div class="feature-box">
                        <div class="feature-icon">üéì</div>
                        <div class="feature-title">Learn & Grow</div>
                        <div class="feature-text">Expert-led sessions</div>
                    </div>
                    <div class="feature-box">
                        <div class="feature-icon">ü§ù</div>
                        <div class="feature-title">Network</div>
                        <div class="feature-text">Connect with peers</div>
                    </div>
                    <div class="feature-box">
                        <div class="feature-icon">üèÜ</div>
                        <div class="feature-title">Win Prizes</div>
                        <div class="feature-text">Exciting rewards</div>
                    </div>
                </div>

                <div class="form-card">
                    <h3>Personal Information</h3>
                    <div class="form-group">
                        <label>Full Name <span class="required">*</span></label>
                        <input type="text" id="fullName" placeholder="Enter your full name">
                        <div class="error-message" id="fullNameError">Please enter your full name</div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Email Address <span class="required">*</span></label>
                            <input type="email" id="email" placeholder="your.email@example.com">
                            <div class="error-message" id="emailError">Please enter a valid email</div>
                        </div>
                        <div class="form-group">
                            <label>Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phone" placeholder="+1 (555) 000-0000">
                            <div class="error-message" id="phoneError">Please enter a valid phone number</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>College/Organization <span class="required">*</span></label>
                            <input type="text" id="college" placeholder="Your institution">
                            <div class="error-message" id="collegeError">This field is required</div>
                        </div>
                        <div class="form-group">
                            <label>Year/Designation <span class="required">*</span></label>
                            <select id="year">
                                <option value="">Select...</option>
                                <option value="1st Year">1st Year</option>
                                <option value="2nd Year">2nd Year</option>
                                <option value="3rd Year">3rd Year</option>
                                <option value="4th Year">4th Year</option>
                                <option value="Graduate">Graduate</option>
                                <option value="Professional">Professional</option>
                            </select>
                            <div class="error-message" id="yearError">Please select an option</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>City <span class="required">*</span></label>
                        <input type="text" id="city" placeholder="Your city">
                        <div class="error-message" id="cityError">Please enter your city</div>
                    </div>
                </div>

                <div class="referral-section">
                    <h4 style="color: #f57c00; margin-bottom: 10px;">üí∞ Have a Referral Code?</h4>
                    <p style="color: #666; font-size: 13px;">Get 10% discount on your registration!</p>
                    <div class="referral-input">
                        <input type="text" id="referralCode" placeholder="Enter referral code" style="flex: 1; padding: 10px; border: 2px solid #ffc107; border-radius: 8px;">
                        <button onclick="applyReferral()" style="padding: 10px 20px; background: #ffc107; color: #333; border-radius: 8px; font-weight: 600;">Apply</button>
                    </div>
                    <div id="referralMessage" style="margin-top: 10px; font-size: 13px; color: #4caf50; display: none;"></div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" disabled>Previous</button>
                    <button class="btn-primary" onclick="nextPage(1)">Next ‚Üí</button>
                </div>
            </div>

            <!-- Page 2: Event Details -->
            <div class="page" id="page2">
                <div class="form-card">
                    <h3>Event Selection</h3>
                    <div class="form-group">
                        <label>Event Code <span class="required">*</span></label>
                        <select id="eventCode" onchange="handleEventChange()">
                            <option value="">Loading events...</option>
                        </select>
                        <div class="error-message" id="eventCodeError">Please select an event</div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Event Type</label>
                            <input type="text" id="eventType" readonly disabled style="background: #f8f9fa;">
                        </div>
                        <div class="form-group">
                            <label>Event Date</label>
                            <input type="text" id="eventDate" readonly disabled style="background: #f8f9fa;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Registration Fee</label>
                        <input type="text" id="eventFee" readonly disabled style="background: #f8f9fa;">
                    </div>
                    <div class="form-group">
                        <label>Event Venue</label>
                        <input type="text" id="eventVenue" readonly disabled style="background: #f8f9fa;">
                    </div>
                </div>

                <!-- Dynamic fields for Workshop -->
                <div class="form-card dynamic-field" id="workshopFields">
                    <h3>Workshop Preferences</h3>
                    <div class="form-group">
                        <label>Preferred Track <span class="required">*</span></label>
                        <select id="workshopTrack">
                            <option value="">Select track...</option>
                            <option value="Web Development">Web Development</option>
                            <option value="Mobile Development">Mobile Development</option>
                            <option value="Data Science">Data Science</option>
                            <option value="AI/ML">AI/ML</option>
                            <option value="Cloud Computing">Cloud Computing</option>
                            <option value="Cybersecurity">Cybersecurity</option>
                        </select>
                        <div class="error-message" id="workshopTrackError">Please select a track</div>
                    </div>
                    <div class="form-group">
                        <label>Experience Level <span class="required">*</span></label>
                        <select id="experienceLevel">
                            <option value="">Select level...</option>
                            <option value="Beginner">Beginner</option>
                            <option value="Intermediate">Intermediate</option>
                            <option value="Advanced">Advanced</option>
                        </select>
                        <div class="error-message" id="experienceLevelError">Please select your level</div>
                    </div>
                    <div class="form-group">
                        <label>Do you need a laptop?</label>
                        <select id="laptopNeeded">
                            <option value="No">No, I'll bring my own</option>
                            <option value="Yes">Yes, please arrange</option>
                        </select>
                    </div>
                </div>

                <!-- Dynamic fields for Competition -->
                <div class="form-card dynamic-field" id="competitionFields">
                    <h3>Team Information</h3>
                    <div class="form-group">
                        <label>Team Name <span class="required">*</span></label>
                        <input type="text" id="teamName" placeholder="Enter your team name">
                        <div class="error-message" id="teamNameError">Team name is required</div>
                    </div>
                    <div class="form-group">
                        <label>Team Size <span class="required">*</span></label>
                        <select id="teamSize">
                            <option value="">Select size...</option>
                            <option value="2">2 Members</option>
                            <option value="3">3 Members</option>
                            <option value="4">4 Members</option>
                            <option value="5">5 Members</option>
                        </select>
                        <div class="error-message" id="teamSizeError">Please select team size</div>
                    </div>
                    <div class="form-group">
                        <label>Project Category <span class="required">*</span></label>
                        <select id="projectCategory">
                            <option value="">Select category...</option>
                            <option value="Web/Mobile">Web/Mobile App</option>
                            <option value="AI/ML">AI/ML Solution</option>
                            <option value="IoT">IoT Project</option>
                            <option value="Blockchain">Blockchain</option>
                            <option value="Other">Other</option>
                        </select>
                        <div class="error-message" id="projectCategoryError">Please select a category</div>
                    </div>
                </div>

                <!-- Dynamic fields for Conference -->
                <div class="form-card dynamic-field" id="conferenceFields">
                    <h3>Conference Preferences</h3>
                    <div class="form-group">
                        <label>Sessions Interested In <span class="required">*</span></label>
                        <select id="conferenceSession">
                            <option value="">Select session...</option>
                            <option value="Keynote">Keynote Speeches</option>
                            <option value="Technical">Technical Workshops</option>
                            <option value="Networking">Networking Sessions</option>
                            <option value="Panel">Panel Discussions</option>
                            <option value="All">All Sessions</option>
                        </select>
                        <div class="error-message" id="conferenceSessionError">Please select a session</div>
                    </div>
                    <div class="form-group">
                        <label>Dietary Restrictions</label>
                        <select id="dietaryRestrictions">
                            <option value="None">None</option>
                            <option value="Vegetarian">Vegetarian</option>
                            <option value="Vegan">Vegan</option>
                            <option value="Gluten-Free">Gluten-Free</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Accommodation Required?</label>
                        <select id="accommodation">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>
                </div>

                <div class="form-card">
                    <h3>Additional Information</h3>
                    <div class="form-group">
                        <label>T-Shirt Size</label>
                        <select id="tshirtSize">
                            <option value="S">Small</option>
                            <option value="M">Medium</option>
                            <option value="L">Large</option>
                            <option value="XL">Extra Large</option>
                            <option value="XXL">XXL</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Special Requirements / Accessibility Needs</label>
                        <textarea id="specialRequirements" rows="3" placeholder="Any special requirements or accessibility needs..."></textarea>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="prevPage(2)">‚Üê Previous</button>
                    <button class="btn-primary" onclick="nextPage(2)">Next ‚Üí</button>
                </div>
            </div>

            <!-- Page 3: Review & Payment -->
            <div class="page" id="page3">
                <div class="review-section">
                    <h4>üìã Personal Information</h4>
                    <div class="review-item">
                        <span class="review-label">Name:</span>
                        <span class="review-value" id="reviewName"></span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Email:</span>
                        <span class="review-value" id="reviewEmail"></span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Phone:</span>
                        <span class="review-value" id="reviewPhone"></span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Institution:</span>
                        <span class="review-value" id="reviewCollege"></span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">City:</span>
                        <span class="review-value" id="reviewCity"></span>
                    </div>
                </div>

                <div class="review-section">
                    <h4>üé™ Event Details</h4>
                    <div class="review-item">
                        <span class="review-label">Event:</span>
                        <span class="review-value" id="reviewEvent"></span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Type:</span>
                        <span class="review-value" id="reviewEventType"></span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Date:</span>
                        <span class="review-value" id="reviewEventDate"></span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Venue:</span>
                        <span class="review-value" id="reviewEventVenue"></span>
                    </div>
                    <div id="additionalReviewItems"></div>
                    <div class="review-item" id="discountRow" style="display: none; color: #4caf50;">
                        <span class="review-label">Discount (10%):</span>
                        <span class="review-value" id="reviewDiscount"></span>
                    </div>
                    <div class="review-item" style="border-top: 2px solid #1e3c72; padding-top: 15px; margin-top: 15px;">
                        <span class="review-label" style="font-size: 16px; font-weight: 600;">Total Fee:</span>
                        <span class="review-value" style="font-size: 18px; color: #1e3c72; font-weight: 700;" id="reviewFee"></span>
                    </div>
                </div>

                <div class="form-card">
                    <h3>üìé Upload Documents</h3>
                    <div class="form-group">
                        <label>Student ID / Proof of Registration <span class="required">*</span></label>
                        <div class="file-upload" onclick="document.getElementById('studentId').click()">
                            <div class="file-upload-icon">üìÑ</div>
                            <div class="file-upload-text">Click to upload (PDF, JPG, PNG - Max 5MB)</div>
                            <div class="file-name" id="studentIdName"></div>
                            <input type="file" id="studentId" accept=".pdf,.jpg,.jpeg,.png" onchange="handleFileUpload(this, 'studentIdName')">
                        </div>
                        <div class="error-message" id="studentIdError">Please upload a valid document</div>
                    </div>
                </div>

                <div class="form-card">
                    <h3>üí≥ Payment Method</h3>
                    <div class="payment-methods">
                        <label class="payment-method" onclick="selectPayment('card')">
                            <input type="radio" name="payment" value="card">
                            <div class="payment-icon">üí≥</div>
                            <div class="payment-label">Credit/Debit Card</div>
                        </label>
                        <label class="payment-method" onclick="selectPayment('upi')">
                            <input type="radio" name="payment" value="upi">
                            <div class="payment-icon">üì±</div>
                            <div class="payment-label">UPI</div>
                        </label>
                        <label class="payment-method" onclick="selectPayment('wallet')">
                            <input type="radio" name="payment" value="wallet">
                            <div class="payment-icon">üëõ</div>
                            <div class="payment-label">Digital Wallet</div>
                        </label>
                        <label class="payment-method" onclick="selectPayment('netbanking')">
                            <input type="radio" name="payment" value="netbanking">
                            <div class="payment-icon">üè¶</div>
                            <div class="payment-label">Net Banking</div>
                        </label>
                    </div>
                    <div class="error-message" id="paymentError">Please select a payment method</div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="prevPage(3)">‚Üê Previous</button>
                    <button class="btn-primary" onclick="proceedToPayment()" id="paymentBtn">Proceed to Payment ‚Üí</button>
                </div>
            </div>

            <!-- Payment Page: Credit/Debit Card -->
            <div class="page" id="paymentCardPage">
                <div class="payment-form">
                    <h3>üí≥ Card Payment</h3>
                    <div class="card-display">
                        <div class="card-chip"></div>
                        <div class="card-number" id="displayCardNumber">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
                        <div class="card-details">
                            <div>
                                <div style="opacity: 0.7; font-size: 11px;">CARD HOLDER</div>
                                <div id="displayCardName">YOUR NAME</div>
                            </div>
                            <div>
                                <div style="opacity: 0.7; font-size: 11px;">EXPIRES</div>
                                <div id="displayCardExpiry">MM/YY</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Card Number <span class="required">*</span></label>
                        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
                        <div class="error-message" id="cardNumberError">Please enter a valid card number</div>
                    </div>
                    <div class="form-group">
                        <label>Cardholder Name <span class="required">*</span></label>
                        <input type="text" id="cardName" placeholder="Name on card" oninput="updateCardDisplay()">
                        <div class="error-message" id="cardNameError">Please enter cardholder name</div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Expiry Date <span class="required">*</span></label>
                            <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5" oninput="formatExpiry(this)">
                            <div class="error-message" id="cardExpiryError">Invalid expiry date</div>
                        </div>
                        <div class="form-group">
                            <label>CVV <span class="required">*</span></label>
                            <input type="password" id="cardCVV" placeholder="123" maxlength="3" oninput="this.value=this.value.replace(/[^0-9]/g,'')">
                            <div class="error-message" id="cardCVVError">Please enter CVV</div>
                        </div>
                    </div>
                    <div class="info-box">
                        üîí Your payment information is secure and encrypted
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="backToPaymentSelection()">‚Üê Back</button>
                    <button class="btn-primary" onclick="processCardPayment()">Pay <span id="cardPayAmount"></span></button>
                </div>
            </div>

            <!-- Payment Page: UPI -->
            <div class="page" id="paymentUPIPage">
                <div class="payment-form">
                    <h3>üì± UPI Payment</h3>
                    <div class="qr-code">
                        <div style="text-align: center;">
                            <div style="font-size: 100px;">üì≤</div>
                            <div style="font-size: 14px; color: #666; margin-top: 10px;">Scan QR Code</div>
                        </div>
                    </div>
                    <div class="upi-id">eventpay@upi</div>
                    <div class="form-group">
                        <label>Or Enter UPI ID <span class="required">*</span></label>
                        <input type="text" id="upiId" placeholder="yourname@upi">
                        <div class="error-message" id="upiIdError">Please enter a valid UPI ID</div>
                    </div>
                    <div class="form-group">
                        <label>Transaction Reference Number</label>
                        <input type="text" id="upiRef" placeholder="Enter UPI reference number after payment">
                    </div>
                    <div class="info-box">
                        üí° After scanning the QR code or paying via UPI, enter the transaction reference number and click verify
                    </div>
                    <div class="timer" id="upiTimer">Time remaining: 10:00</div>
                </div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="backToPaymentSelection()">‚Üê Back</button>
                    <button class="btn-primary" onclick="processUPIPayment()">Verify Payment</button>
                </div>
            </div>

            <!-- Payment Page: Wallet -->
            <div class="page" id="paymentWalletPage">
                <div class="payment-form">
                    <h3>üëõ Digital Wallet Payment</h3>
                    <div class="payment-methods" style="margin-top: 30px;">
                        <label class="payment-method" onclick="selectWallet('paytm')">
                            <input type="radio" name="wallet" value="paytm">
                            <div class="payment-icon">üíô</div>
                            <div class="payment-label">Paytm</div>
                        </label>
                        <label class="payment-method" onclick="selectWallet('phonepe')">
                            <input type="radio" name="wallet" value="phonepe">
                            <div class="payment-icon">üíú</div>
                            <div class="payment-label">PhonePe</div>
                        </label>
                        <label class="payment-method" onclick="selectWallet('googlepay')">
                            <input type="radio" name="wallet" value="googlepay">
                            <div class="payment-icon">üîµ</div>
                            <div class="payment-label">Google Pay</div>
                        </label>
                        <label class="payment-method" onclick="selectWallet('amazonpay')">
                            <input type="radio" name="wallet" value="amazonpay">
                            <div class="payment-icon">üü†</div>
                            <div class="payment-label">Amazon Pay</div>
                        </label>
                    </div>
                    <div class="error-message" id="walletError" style="margin-top: 15px;">Please select a wallet</div>
                    <div class="info-box" style="margin-top: 30px;">
                        You will be redirected to your selected wallet app to complete the payment
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="backToPaymentSelection()">‚Üê Back</button>
                    <button class="btn-primary" onclick="processWalletPayment()">Continue to Wallet</button>
                </div>
            </div>

            <!-- Payment Page: Net Banking -->
            <div class="page" id="paymentNetBankingPage">
                <div class="payment-form">
                    <h3>üè¶ Net Banking</h3>
                    <div class="form-group">
                        <label>Select Your Bank <span class="required">*</span></label>
                        <select id="bankName">
                            <option value="">Choose your bank...</option>
                            <option value="SBI">State Bank of India</option>
                            <option value="HDFC">HDFC Bank</option>
                            <option value="ICICI">ICICI Bank</option>
                            <option value="Axis">Axis Bank</option>
                            <option value="PNB">Punjab National Bank</option>
                            <option value="BOB">Bank of Baroda</option>
                            <option value="Kotak">Kotak Mahindra Bank</option>
                            <option value="Yes">Yes Bank</option>
                            <option value="Other">Other Banks</option>
                        </select>
                        <div class="error-message" id="bankNameError">Please select your bank</div>
                    </div>
                    <div class="info-box">
                        üîí You will be redirected to your bank's secure login page to complete the payment
                    </div>
                    <div class="review-item" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 20px;">
                        <span class="review-label">Amount to be paid:</span>
                        <span class="review-value" style="font-size: 24px; color: #1e3c72; font-weight: 700;" id="netBankingAmount"></span>
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="backToPaymentSelection()">‚Üê Back</button>
                    <button class="btn-primary" onclick="processNetBankingPayment()">Proceed to Bank</button>
                </div>
            </div>

            <!-- Success Page -->
            <div class="page" id="successPage">
                <div class="success-message">
                    <div class="success-icon">‚úÖ</div>
                    <h2>Registration Successful!</h2>
                    <p>Your payment has been processed successfully.</p>
                    <div class="review-section" style="text-align: left; margin-top: 30px;">
                        <h4>Confirmation Details</h4>
                        <div class="review-item">
                            <span class="review-label">Registration ID:</span>
                            <span class="review-value" id="confirmationId"></span>
                        </div>
                        <div class="review-item">
                            <span class="review-label">Transaction ID:</span>
                            <span class="review-value" id="transactionId"></span>
                        </div>
                        <div class="review-item">
                            <span class="review-label">Amount Paid:</span>
                            <span class="review-value" id="amountPaid"></span>
                        </div>
                        <div class="review-item">
                            <span class="review-label">Payment Method:</span>
                            <span class="review-value" id="paymentMethod"></span>
                        </div>
                    </div>
                    <p style="margin-top: 20px; color: #666; font-size: 13px;">
                        üìß A confirmation email has been sent to <strong id="confirmEmail"></strong>
                    </p>
                    <p style="margin-top: 10px; color: #666; font-size: 13px;">
                        üì± SMS confirmation sent to <strong id="confirmPhone"></strong>
                    </p>
                    <div class="button-group" style="margin-top: 30px;">
                        <button class="btn-primary" onclick="downloadTicket()">üì• Download E-Ticket</button>
                        <button class="btn-secondary" onclick="location.reload()">Register Another</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Form data storage
        let formData = {};
        let selectedPayment = '';
        let selectedWalletType = '';
        let discountApplied = false;
        let originalFee = 0;

        // Mock API - Event codes with more details
        const eventCodes = [
            { code: 'TECH2024-WS', name: 'Tech Workshop 2024', type: 'Workshop', fee: 499, date: 'March 15, 2024', venue: 'Tech Hub, Building A' },
            { code: 'HACK2024-CP', name: 'HackFest 2024', type: 'Competition', fee: 999, date: 'March 20-21, 2024', venue: 'Innovation Center' },
            { code: 'CONF2024-AI', name: 'AI Conference 2024', type: 'Conference', fee: 1499, date: 'April 5-7, 2024', venue: 'Convention Center' },
            { code: 'WEB2024-WS', name: 'Web Dev Workshop', type: 'Workshop', fee: 599, date: 'March 18, 2024', venue: 'CS Department' },
            { code: 'CODE2024-CP', name: 'CodeSprint Challenge', type: 'Competition', fee: 799, date: 'March 25, 2024', venue: 'Main Auditorium' },
            { code: 'CLOUD2024-CF', name: 'Cloud Summit 2024', type: 'Conference', fee: 1299, date: 'April 10-12, 2024', venue: 'Grand Hotel' }
        ];

        // Valid referral codes
        const validReferralCodes = ['EVENT10', 'STUDENT24', 'TECH2024', 'SAVE10'];

        // Simulate API call to fetch events
        function fetchEvents() {
            setTimeout(() => {
                const select = document.getElementById('eventCode');
                select.innerHTML = '<option value="">Select an event...</option>';
                eventCodes.forEach(event => {
                    const option = document.createElement('option');
                    option.value = event.code;
                    option.textContent = `${event.name} (${event.code})`;
                    option.dataset.type = event.type;
                    option.dataset.fee = event.fee;
                    option.dataset.date = event.date;
                    option.dataset.venue = event.venue;
                    select.appendChild(option);
                });
            }, 500);
        }

        // Initialize on load
        window.onload = function() {
            fetchEvents();
            updateProgressBar(1);
        };

        // Referral code handling
        function applyReferral() {
            const code = document.getElementById('referralCode').value.trim().toUpperCase();
            const message = document.getElementById('referralMessage');
            
            if (validReferralCodes.includes(code)) {
                discountApplied = true;
                message.textContent = '‚úÖ Referral code applied! You\'ll get 10% discount.';
                message.style.color = '#4caf50';
                message.style.display = 'block';
            } else if (code) {
                discountApplied = false;
                message.textContent = '‚ùå Invalid referral code';
                message.style.color = '#e74c3c';
                message.style.display = 'block';
            }
        }

        // Event change handler
        function handleEventChange() {
            const select = document.getElementById('eventCode');
            const selectedOption = select.options[select.selectedIndex];
            
            if (selectedOption.value) {
                const eventType = selectedOption.dataset.type;
                const eventFee = parseFloat(selectedOption.dataset.fee);
                const eventDate = selectedOption.dataset.date;
                const eventVenue = selectedOption.dataset.venue;
                
                originalFee = eventFee;
                
                document.getElementById('eventType').value = eventType;
                document.getElementById('eventDate').value = eventDate;
                document.getElementById('eventVenue').value = eventVenue;
                
                const finalFee = discountApplied ? eventFee * 0.9 : eventFee;
                document.getElementById('eventFee').value = `‚Çπ${finalFee.toFixed(2)}`;
                
                // Hide all dynamic fields
                document.querySelectorAll('.dynamic-field').forEach(field => {
                    field.classList.remove('show');
                });
                
                // Show relevant fields
                if (eventType === 'Workshop') {
                    document.getElementById('workshopFields').classList.add('show');
                } else if (eventType === 'Competition') {
                    document.getElementById('competitionFields').classList.add('show');
                } else if (eventType === 'Conference') {
                    document.getElementById('conferenceFields').classList.add('show');
                }
            } else {
                document.getElementById('eventType').value = '';
                document.getElementById('eventDate').value = '';
                document.getElementById('eventVenue').value = '';
                document.getElementById('eventFee').value = '';
                document.querySelectorAll('.dynamic-field').forEach(field => {
                    field.classList.remove('show');
                });
            }
        }

        // Validation functions
        function validateEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function validatePhone(phone) {
            return /^[\d\s\+\-\(\)]{10,}$/.test(phone);
        }

        function showError(fieldId, errorId, message) {
            document.getElementById(fieldId).classList.add('error');
            const errorElement = document.getElementById(errorId);
            if (message) errorElement.textContent = message;
            errorElement.classList.add('show');
        }

        function clearError(fieldId, errorId) {
            document.getElementById(fieldId).classList.remove('error');
            document.getElementById(errorId).classList.remove('show');
        }

        // Page 1 validation
        function validatePage1() {
            let isValid = true;
            
            const fullName = document.getElementById('fullName').value.trim();
            if (!fullName) {
                showError('fullName', 'fullNameError');
                isValid = false;
            } else {
                clearError('fullName', 'fullNameError');
            }
            
            const email = document.getElementById('email').value.trim();
            if (!email || !validateEmail(email)) {
                showError('email', 'emailError');
                isValid = false;
            } else {
                clearError('email', 'emailError');
            }
            
            const phone = document.getElementById('phone').value.trim();
            if (!phone || !validatePhone(phone)) {
                showError('phone', 'phoneError');
                isValid = false;
            } else {
                clearError('phone', 'phoneError');
            }
            
            const college = document.getElementById('college').value.trim();
            if (!college) {
                showError('college', 'collegeError');
                isValid = false;
            } else {
                clearError('college', 'collegeError');
            }
            
            const year = document.getElementById('year').value;
            if (!year) {
                showError('year', 'yearError');
                isValid = false;
            } else {
                clearError('year', 'yearError');
            }
            
            const city = document.getElementById('city').value.trim();
            if (!city) {
                showError('city', 'cityError');
                isValid = false;
            } else {
                clearError('city', 'cityError');
            }
            
            if (isValid) {
                formData.fullName = fullName;
                formData.email = email;
                formData.phone = phone;
                formData.college = college;
                formData.year = year;
                formData.city = city;
            }
            
            return isValid;
        }

        // Page 2 validation
        function validatePage2() {
            let isValid = true;
            
            const eventCode = document.getElementById('eventCode').value;
            if (!eventCode) {
                showError('eventCode', 'eventCodeError');
                isValid = false;
            } else {
                clearError('eventCode', 'eventCodeError');
                formData.eventCode = eventCode;
                formData.eventType = document.getElementById('eventType').value;
                formData.eventFee = document.getElementById('eventFee').value;
                formData.eventDate = document.getElementById('eventDate').value;
                formData.eventVenue = document.getElementById('eventVenue').value;
                formData.tshirtSize = document.getElementById('tshirtSize').value;
                formData.specialRequirements = document.getElementById('specialRequirements').value;
                
                // Validate dynamic fields based on event type
                if (formData.eventType === 'Workshop') {
                    const track = document.getElementById('workshopTrack').value;
                    const level = document.getElementById('experienceLevel').value;
                    
                    if (!track) {
                        showError('workshopTrack', 'workshopTrackError');
                        isValid = false;
                    } else {
                        clearError('workshopTrack', 'workshopTrackError');
                        formData.workshopTrack = track;
                    }
                    
                    if (!level) {
                        showError('experienceLevel', 'experienceLevelError');
                        isValid = false;
                    } else {
                        clearError('experienceLevel', 'experienceLevelError');
                        formData.experienceLevel = level;
                    }
                    
                    formData.laptopNeeded = document.getElementById('laptopNeeded').value;
                } else if (formData.eventType === 'Competition') {
                    const teamName = document.getElementById('teamName').value.trim();
                    const teamSize = document.getElementById('teamSize').value;
                    const category = document.getElementById('projectCategory').value;
                    
                    if (!teamName) {
                        showError('teamName', 'teamNameError');
                        isValid = false;
                    } else {
                        clearError('teamName', 'teamNameError');
                        formData.teamName = teamName;
                    }
                    
                    if (!teamSize) {
                        showError('teamSize', 'teamSizeError');
                        isValid = false;
                    } else {
                        clearError('teamSize', 'teamSizeError');
                        formData.teamSize = teamSize;
                    }
                    
                    if (!category) {
                        showError('projectCategory', 'projectCategoryError');
                        isValid = false;
                    } else {
                        clearError('projectCategory', 'projectCategoryError');
                        formData.projectCategory = category;
                    }
                } else if (formData.eventType === 'Conference') {
                    const session = document.getElementById('conferenceSession').value;
                    
                    if (!session) {
                        showError('conferenceSession', 'conferenceSessionError');
                        isValid = false;
                    } else {
                        clearError('conferenceSession', 'conferenceSessionError');
                        formData.conferenceSession = session;
                        formData.dietaryRestrictions = document.getElementById('dietaryRestrictions').value;
                        formData.accommodation = document.getElementById('accommodation').value;
                    }
                }
            }
            
            return isValid;
        }

        // File upload handler
        function handleFileUpload(input, displayId) {
            const file = input.files[0];
            const display = document.getElementById(displayId);
            const errorElement = document.getElementById('studentIdError');
            
            if (file) {
                const allowedTypes = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'];
                if (!allowedTypes.includes(file.type)) {
                    errorElement.textContent = 'Invalid file type. Only PDF, JPG, PNG allowed.';
                    errorElement.classList.add('show');
                    input.value = '';
                    display.textContent = '';
                    return;
                }
                
                if (file.size > 5 * 1024 * 1024) {
                    errorElement.textContent = 'File size must be less than 5MB.';
                    errorElement.classList.add('show');
                    input.value = '';
                    display.textContent = '';
                    return;
                }
                
                display.textContent = `‚úì ${file.name}`;
                errorElement.classList.remove('show');
                formData.studentId = file.name;
            }
        }

        // Payment selection
        function selectPayment(method) {
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            selectedPayment = method;
            document.getElementById('paymentError').classList.remove('show');
        }

        // Wallet selection
        function selectWallet(wallet) {
            document.querySelectorAll('#paymentWalletPage .payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            selectedWalletType = wallet;
            document.getElementById('walletError').classList.remove('show');
        }

        // Update progress bar
        function updateProgressBar(step) {
            const steps = document.querySelectorAll('.progress-step');
            const progressFill = document.getElementById('progressFill');
            
            steps.forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    stepEl.classList.add('completed');
                } else if (index + 1 === step) {
                    stepEl.classList.add('active');
                }
            });
            
            const width = ((step - 1) / (steps.length - 1)) * 100;
            const progressBar = document.querySelector('.progress-bar');
            const padding = window.innerWidth > 768 ? 100 : 40;
            progressFill.style.width = `calc(${width}% - ${padding * (1 - width/100)}px)`;
        }

        // Navigation
        function nextPage(currentPage) {
            if (currentPage === 1 && !validatePage1()) return;
            if (currentPage === 2 && !validatePage2()) return;
            
            if (currentPage === 2) {
                populateReview();
            }
            
            document.getElementById(`page${currentPage}`).classList.remove('active');
            document.getElementById(`page${currentPage + 1}`).classList.add('active');
            updateProgressBar(currentPage + 1);
            window.scrollTo(0, 0);
        }

        function prevPage(currentPage) {
            document.getElementById(`page${currentPage}`).classList.remove('active');
            document.getElementById(`page${currentPage - 1}`).classList.add('active');
            updateProgressBar(currentPage - 1);
            window.scrollTo(0, 0);
        }

        // Populate review section
        function populateReview() {
            document.getElementById('reviewName').textContent = formData.fullName;
            document.getElementById('reviewEmail').textContent = formData.email;
            document.getElementById('reviewPhone').textContent = formData.phone;
            document.getElementById('reviewCollege').textContent = formData.college;
            document.getElementById('reviewCity').textContent = formData.city;
            
            const select = document.getElementById('eventCode');
            const selectedOption = select.options[select.selectedIndex];
            document.getElementById('reviewEvent').textContent = selectedOption.textContent;
            document.getElementById('reviewEventType').textContent = formData.eventType;
            document.getElementById('reviewEventDate').textContent = formData.eventDate;
            document.getElementById('reviewEventVenue').textContent = formData.eventVenue;
            
            if (discountApplied) {
                document.getElementById('discountRow').style.display = 'flex';
                document.getElementById('reviewDiscount').textContent = `-‚Çπ${(originalFee * 0.1).toFixed(2)}`;
            }
            
            document.getElementById('reviewFee').textContent = formData.eventFee;
            
            // Add dynamic review items
            const additionalItems = document.getElementById('additionalReviewItems');
            additionalItems.innerHTML = '';
            
            if (formData.eventType === 'Workshop') {
                additionalItems.innerHTML += `
                    <div class="review-item">
                        <span class="review-label">Track:</span>
                        <span class="review-value">${formData.workshopTrack}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Experience:</span>
                        <span class="review-value">${formData.experienceLevel}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Laptop:</span>
                        <span class="review-value">${formData.laptopNeeded}</span>
                    </div>
                `;
            } else if (formData.eventType === 'Competition') {
                additionalItems.innerHTML += `
                    <div class="review-item">
                        <span class="review-label">Team Name:</span>
                        <span class="review-value">${formData.teamName}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Team Size:</span>
                        <span class="review-value">${formData.teamSize} Members</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Category:</span>
                        <span class="review-value">${formData.projectCategory}</span>
                    </div>
                `;
            } else if (formData.eventType === 'Conference') {
                additionalItems.innerHTML += `
                    <div class="review-item">
                        <span class="review-label">Session:</span>
                        <span class="review-value">${formData.conferenceSession}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Dietary:</span>
                        <span class="review-value">${formData.dietaryRestrictions}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Accommodation:</span>
                        <span class="review-value">${formData.accommodation}</span>
                    </div>
                `;
            }
        }

        // Proceed to payment page
        function proceedToPayment() {
            if (!formData.studentId) {
                showError('studentId', 'studentIdError', 'Please upload your student ID');
                return;
            }
            
            if (!selectedPayment) {
                document.getElementById('paymentError').classList.add('show');
                return;
            }
            
            // Hide review page
            document.getElementById('page3').classList.remove('active');
            
            // Show appropriate payment page
            const paymentAmount = formData.eventFee;
            
            if (selectedPayment === 'card') {
                document.getElementById('cardPayAmount').textContent = paymentAmount;
                document.getElementById('paymentCardPage').classList.add('active');
            } else if (selectedPayment === 'upi') {
                document.getElementById('paymentUPIPage').classList.add('active');
                startUPITimer();
            } else if (selectedPayment === 'wallet') {
                document.getElementById('paymentWalletPage').classList.add('active');
            } else if (selectedPayment === 'netbanking') {
                document.getElementById('netBankingAmount').textContent = paymentAmount;
                document.getElementById('paymentNetBankingPage').classList.add('active');
            }
            
            window.scrollTo(0, 0);
        }

        // Back to payment selection
        function backToPaymentSelection() {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('page3').classList.add('active');
            window.scrollTo(0, 0);
        }

        // Card number formatting
        function formatCardNumber(input) {
            let value = input.value.replace(/\s/g, '').replace(/[^0-9]/g, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            input.value = formattedValue;
            
            document.getElementById('displayCardNumber').textContent = 
                formattedValue || '‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
        }

        // Expiry formatting
        function formatExpiry(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.slice(0, 2) + '/' + value.slice(2, 4);
            }
            input.value = value;
            
            document.getElementById('displayCardExpiry').textContent = value || 'MM/YY';
        }

        // Update card display
        function updateCardDisplay() {
            const name = document.getElementById('cardName').value.toUpperCase();
            document.getElementById('displayCardName').textContent = name || 'YOUR NAME';
        }

        // Process card payment
        function processCardPayment() {
            let isValid = true;
            
            const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
            if (cardNumber.length !== 16) {
                showError('cardNumber', 'cardNumberError');
                isValid = false;
            } else {
                clearError('cardNumber', 'cardNumberError');
            }
            
            const cardName = document.getElementById('cardName').value.trim();
            if (!cardName) {
                showError('cardName', 'cardNameError');
                isValid = false;
            } else {
                clearError('cardName', 'cardNameError');
            }
            
            const cardExpiry = document.getElementById('cardExpiry').value;
            if (!/^\d{2}\/\d{2}$/.test(cardExpiry)) {
                showError('cardExpiry', 'cardExpiryError');
                isValid = false;
            } else {
                clearError('cardExpiry', 'cardExpiryError');
            }
            
            const cardCVV = document.getElementById('cardCVV').value;
            if (cardCVV.length !== 3) {
                showError('cardCVV', 'cardCVVError');
                isValid = false;
            } else {
                clearError('cardCVV', 'cardCVVError');
            }
            
            if (isValid) {
                completePayment('Credit/Debit Card');
            }
        }

        // UPI Timer
        let upiTimerInterval;
        function startUPITimer() {
            let timeLeft = 600; // 10 minutes
            upiTimerInterval = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('upiTimer').textContent = 
                    `Time remaining: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(upiTimerInterval);
                    document.getElementById('upiTimer').textContent = 'Session expired! Please try again.';
                }
                timeLeft--;
            }, 1000);
        }

        // Process UPI payment
        function processUPIPayment() {
            const upiId = document.getElementById('upiId').value.trim();
            
            if (!upiId || !upiId.includes('@')) {
                showError('upiId', 'upiIdError');
                return;
            }
            
            clearError('upiId', 'upiIdError');
            clearInterval(upiTimerInterval);
            completePayment('UPI');
        }

        // Process wallet payment
        function processWalletPayment() {
            if (!selectedWalletType) {
                document.getElementById('walletError').classList.add('show');
                return;
            }
            
            completePayment(`Wallet (${selectedWalletType})`);
        }

        // Process net banking payment
        function processNetBankingPayment() {
            const bank = document.getElementById('bankName').value;
            
            if (!bank) {
                showError('bankName', 'bankNameError');
                return;
            }
            
            clearError('bankName', 'bankNameError');
            completePayment(`Net Banking (${bank})`);
        }

        // Complete payment
        function completePayment(method) {
            // Show loading state
            const activeButton = document.querySelector('.page.active .btn-primary');
            activeButton.disabled = true;
            activeButton.innerHTML = '<span class="loading-spinner"></span>Processing Payment...';
            
            setTimeout(() => {
                const registrationId = 'REG' + Math.random().toString(36).substr(2, 9).toUpperCase();
                const transactionId = 'TXN' + Math.random().toString(36).substr(2, 12).toUpperCase();
                
                document.getElementById('confirmationId').textContent = registrationId;
                document.getElementById('transactionId').textContent = transactionId;
                document.getElementById('amountPaid').textContent = formData.eventFee;
                document.getElementById('paymentMethod').textContent = method;
                document.getElementById('confirmEmail').textContent = formData.email;
                document.getElementById('confirmPhone').textContent = formData.phone;
                
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                document.getElementById('successPage').classList.add('active');
                window.scrollTo(0, 0);
                
                activeButton.disabled = false;
                activeButton.innerHTML = activeButton.textContent.replace('Processing Payment...', 'Pay');
            }, 2000);
        }

        // Download ticket
        function downloadTicket() {
            alert('üéüÔ∏è E-Ticket downloaded successfully!\n\nYour ticket has been saved to your downloads folder.');
        }
    </script>
</body>
</html>